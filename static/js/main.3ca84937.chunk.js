(this.webpackJsonpminerva_facilities=this.webpackJsonpminerva_facilities||[]).push([[0],{63:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n(2),o=n.n(a),r=n(26),i=n.n(r),c=n(5),l=n(17),d=o.a.createContext(null),u=n(4),j=n(6),b=n(7),h=n(9),p=n(8),m=o.a.createContext(null),O=function(e){return function(t){return Object(s.jsx)(m.Consumer,{children:function(n){return Object(s.jsx)(e,Object(u.a)(Object(u.a)({},t),{},{firebase:n}))}})}},f=m,g=n(22),x=(n(52),n(54),n(66),n(67),n(68),{apiKey:"AIzaSyBnJSs5VkOG4k2VAByyYU8pxeyOthF3FFs",authDomain:"minerva-facilities.firebaseapp.com",databaseURL:"https://minerva-facilities.firebaseio.com",projectId:"minerva-facilities",storageBucket:"minerva-facilities.appspot.com",messagingSenderId:"286455586521",appId:"1:286455586521:web:658ab0b3a18a1dcebfe8c8",measurementId:"G-674WMEGJDS"}),v=function e(){var t=this;Object(j.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,n){return t.analytics.logEvent("Created A New User Using Email & Pass"),t.auth.createUserWithEmailAndPassword(e,n)},this.doSignInWithEmailAndPassword=function(e,n){return t.analytics.logEvent("User Logged In Using Email & Pass"),t.auth.signInWithEmailAndPassword(e,n)},this.doSignInWithGoogle=function(){return t.analytics.logEvent("User Logged In Using Google"),t.auth.signInWithPopup(t.googleProvider)},this.doSignInWithFacebook=function(){return t.auth.signInWithPopup(t.facebookProvider)},this.doSignInWithTwitter=function(){return t.auth.signInWithPopup(t.twitterProvider)},this.doSignOut=function(){return t.analytics.logEvent("User Logged Out"),t.auth.signOut()},this.doPasswordReset=function(e){return t.analytics.logEvent("User Tried To Rest Their Password"),t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.analytics.logEvent("User Changed Their Password"),t.auth.currentUser.updatePassword(e)},this.doSendEmailVerification=function(){return t.analytics.logEvent("Email Verification Sent"),t.auth.currentUser.sendEmailVerification({url:"http://localhost:3000/"})},this.onAuthUserListener=function(e,n){return t.auth.onAuthStateChanged((function(s){s?t.user(s.uid).once("value").then((function(t){var n=t.val();n.roles||(n.roles="EMPLOYEE"),s=Object(u.a)({uid:s.uid,email:s.email,emailVerified:s.emailVerified,providerData:s.providerData},n),e(s)})):n()}))},this.user=function(e){return t.analytics.logEvent("Referencing A User's Data"),t.db.ref("users/".concat(e))},this.users=function(){t.analytics.logEvent("Referencing Users List"),t.db.ref("users")},this.setUserCompany=function(e,n){return t.user(e).update({company_id:n})},this.company=function(e){t.analytics.logEvent("Referencing A Company's Data"),t.db.ref("companies/".concat(e))},this.companies=function(){t.analytics.logEvent("Referencing Companies List"),t.db.ref("companies")},this.createCompany=function(e){var n=t.db.ref("companies").push().key,s={};return s["/companies/"+n]=e,s["/users/"+e.owner.ownerID+"/companies/"+e.companyTitle]=n,s["/users/"+e.owner.ownerID+"/company_id"]=n,t.analytics.logEvent("Creating A New Company"),t.db.ref().update(s),n},this.building=function(e){t.analytics.logEvent("Referencing A Building's Data"),t.db.ref("buildings/".concat(e))},this.buildings=function(){t.analytics.logEvent("Referencing Buildings List"),t.db.ref("buildings")},this.createBuilding=function(e){var n=e.companyID,s=e.buildingTitle,a=t.db.ref("buildings").push().key,o={};return o["/companies/"+n+"/buildings/"+s]=a,o["/buildings/"+a]=e,t.analytics.logEvent("Creating A New Building"),t.db.ref().update(o),a},this.floor=function(e){t.analytics.logEvent("Referencing A Floor's Data"),t.db.ref("floors/".concat(e))},this.floors=function(){t.analytics.logEvent("Referencing Floors List"),t.db.ref("floors")},this.createFloor=function(e){var n=e.companyID,s=e.buildingID,a=e.floorTitle,o=t.db.ref("floors").push().key,r={};return r["/companies/"+n+"/buildings/"+s+"/floors/"+a]=o,r["/floors/"+o]=e,t.analytics.logEvent("Creating A New Floor"),t.db.ref().update(r),o},this.room=function(e){t.analytics.logEvent("Referencing A Rooms's Data"),t.db.ref("rooms/".concat(e))},this.rooms=function(){t.analytics.logEvent("Referencing Rooms List"),t.db.ref("rooms")},this.createRoom=function(e){var n=e.companyID,s=e.buildingID,a=e.floorID,o=e.roomTitle,r=t.db.ref("rooms").push().key,i={};return i["/companies/"+n+"/buildings/"+s+"/floors/"+a+"/rooms/"+o]=r,i["/rooms/"+r]=e,t.analytics.logEvent("Creating A New Room"),t.db.ref().update(i),r},this.report=function(e){t.analytics.logEvent("Referencing A Reports's Data"),t.db.ref("reports/".concat(e))},this.reports=function(){t.analytics.logEvent("Referencing Reports List"),t.db.ref("reports")},this.createReport=function(e){var n=e.location,s=e.reportTitle,a=e.reporter,o=n.companyID,r=n.buildingID,i=n.floorID,c=n.roomID,l=t.db.ref("reports").push().key,d={};return d["/reports/"+l]=e,d["/users/"+a.ownerID+"/reports/"+s]=l,console.log(o,r,i,c,s,a),t.analytics.logEvent("Creating A New Report"),t.db.ref().update(d),l},g.a.initializeApp(x),this.serverValue=g.a.database.ServerValue,this.emailAuthProvider=g.a.auth.EmailAuthProvider,this.auth=g.a.auth(),this.db=g.a.database(),this.storage=g.a.storage(),this.analytics=g.a.analytics(),this.performance=g.a.performance(),this.googleProvider=new g.a.auth.GoogleAuthProvider,this.facebookProvider=new g.a.auth.FacebookAuthProvider,this.twitterProvider=new g.a.auth.TwitterAuthProvider},y=function(e){var t=function(t){Object(h.a)(a,t);var n=Object(p.a)(a);function a(e){var t;return Object(j.a)(this,a),(t=n.call(this,e)).state={authUser:JSON.parse(localStorage.getItem("authUser"))},t}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.onAuthUserListener((function(t){localStorage.setItem("authUser",JSON.stringify(t)),e.setState({authUser:t})}),(function(){localStorage.removeItem("authUser"),e.setState({authUser:null})}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return Object(s.jsx)(d.Provider,{value:this.state.authUser,children:Object(s.jsx)(e,Object(u.a)({},this.props))})}}]),a}(o.a.Component);return O(t)},C=n(16),N="/home",S="/signup",I="/signin",w="/pw-forget",D="/account",k="/admin",A="/companies",T="/buildings",E="/floors",M="/rooms",R="/reports",U=function(e){return function(t){var n=function(n){Object(h.a)(o,n);var a=Object(p.a)(o);function o(){return Object(j.a)(this,o),a.apply(this,arguments)}return Object(b.a)(o,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.onAuthUserListener((function(n){e(n)||t.props.history.push(I)}),(function(){return t.props.history.push(I)}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var n=this;return Object(s.jsx)(d.Consumer,{children:function(a){return e(a)?Object(s.jsx)(t,Object(u.a)({},n.props)):null}})}}]),o}(o.a.Component);return Object(C.a)(l.h,O)(n)}},L=function(e){var t=function(t){Object(h.a)(a,t);var n=Object(p.a)(a);function a(e){var t;return Object(j.a)(this,a),(t=n.call(this,e)).onSendEmailVerification=function(){t.props.firebase.doSendEmailVerification().then((function(){return t.setState({isSent:!0})}))},t.state={isSent:!1},t}return Object(b.a)(a,[{key:"render",value:function(){var t=this;return Object(s.jsx)(d.Consumer,{children:function(n){return function(e){return e&&!e.emailVerified&&e.providerData.map((function(e){return e.providerId})).includes("password")}(n)?Object(s.jsxs)("div",{children:[t.state.isSent?Object(s.jsx)("p",{children:"E-Mail confirmation sent: Check your E-Mails (Spam folder included) for a confirmation E-Mail. Refresh this page once you confirmed your E-Mail."}):Object(s.jsx)("p",{children:"Verify your E-Mail: Check your E-Mails (Spam folder included) for a confirmation E-Mail or send another confirmation E-Mail."}),Object(s.jsx)("button",{type:"button btn-primary",onClick:t.onSendEmailVerification,disabled:t.state.isSent,children:"Re-Send confirmation E-Mail"})]}):Object(s.jsx)(e,Object(u.a)({},t.props))}})}}]),a}(o.a.Component);return O(t)},P=n.p+"static/media/minerva-transparent-clean.80ad244d.png",B=n(13),F=n(14),W=function(){return Object(s.jsx)(d.Consumer,{children:function(e){return!!e&&Object(s.jsx)("div",{className:"tab-wrapper",children:Object(s.jsx)("div",{className:"container",children:Object(s.jsx)("div",{className:"row",children:Object(s.jsx)("nav",{defaultactivekey:"/home",children:Object(s.jsxs)("div",{className:"nav nav-tabs",id:"nav-tab",role:"tablist",children:[Object(s.jsx)(c.b,{className:"nav-item nav-link",id:"nav-home-tab","data-toggle":"tab",role:"tab","aria-controls":"nav-home","aria-selected":"false",to:N,children:Object(s.jsx)(F.a,{icon:B.c})}),Object(s.jsx)(c.b,{className:"nav-item nav-link",id:"nav-account-tab","data-toggle":"tab",role:"tab","aria-controls":"nav-account","aria-selected":"false",to:D,children:"Account"}),!!e.company_id&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(c.b,{className:"nav-item nav-link",id:"nav-buildings-tab","data-toggle":"tab",role:"tab","aria-controls":"nav-buildings","aria-selected":"false",to:{pathname:"".concat(A)},children:"Company"}),Object(s.jsx)(c.b,{className:"nav-item nav-link",id:"nav-floors-tab","data-toggle":"tab",role:"tab","aria-controls":"nav-floors","aria-selected":"false",to:E,children:"Floors"})]}),!!e.roles.ADMIN&&Object(s.jsx)(c.b,{className:"nav-item nav-link",id:"nav-admin-tab","data-toggle":"tab",role:"tab","aria-controls":"nav-admin","aria-selected":"false",to:k,children:"Admin"})]})})})})})}})},V={passwordOne:"",passwordTwo:"",error:null},Y=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onSubmit=function(e){var t=s.state.passwordOne;s.props.firebase.doPasswordUpdate(t).then((function(){s.setState(Object(u.a)({},V))})).catch((function(e){s.setState({error:e})})),e.preventDefault()},s.onChange=function(e){s.setState({[e.target.name]:e.target.value})},s.state=Object(u.a)({},V),s}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.passwordOne,a=e.passwordTwo,o=e.error,r=n!==a||""===n;return Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsx)("input",{hidden:!0,name:"email",autoComplete:"email",value:t,type:"text",placeholder:"Email Address"}),Object(s.jsxs)("div",{className:"form-row",children:[Object(s.jsx)("input",{className:"form-input",name:"passwordOne",autoComplete:"new-password",value:n,onChange:this.onChange,type:"password",placeholder:"New Password"}),Object(s.jsx)("input",{className:"form-input ",name:"passwordTwo",autoComplete:"new-password",value:a,onChange:this.onChange,type:"password",placeholder:"Confirm New Password"})]}),Object(s.jsx)("button",{className:"btn btn-danger",disabled:r,type:"submit",children:"Reset Password"}),o&&Object(s.jsx)("p",{children:o.message})]})}}]),n}(a.Component),_=O(Y),G=n.p+"static/media/minerva-transparent-vector.eefc7c90.png",J={email:"",error:null},q=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onSubmit=function(e){var t=s.state.email;s.props.firebase.doPasswordReset(t).then((function(){s.setState(Object(u.a)({},J))})).catch((function(e){s.setState({error:e})})),e.preventDefault()},s.onChange=function(e){s.setState({[e.target.name]:e.target.value})},s.state=Object(u.a)({},J),s}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.error,a=""===t;return Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsx)("input",{className:"form-input",name:"email",autoComplete:"email",value:this.state.email,onChange:this.onChange,type:"text",placeholder:"Email Address"}),Object(s.jsx)("button",{className:"btn btn-secondary btn-social",disabled:a,type:"submit",children:"Reset Password"}),n&&Object(s.jsx)("p",{children:n.message})]})}}]),n}(a.Component),H=function(){return Object(s.jsx)("p",{children:Object(s.jsx)(c.b,{to:w,className:"highlight-link",children:"Forgot Password?"})})},z=Object(l.h)((function(e){var t=e.history;return Object(s.jsx)("div",{children:Object(s.jsxs)("button",{className:"btn btn-primary btn-social",onClick:function(){return t.goBack()},children:[Object(s.jsx)(F.a,{icon:B.a})," Go Back"]})})})),K=function(){return Object(s.jsx)("div",{className:"page-bg",children:Object(s.jsxs)("div",{className:"page-inner",children:[Object(s.jsx)("img",{className:"signin-logo fade-in",alt:"logo",src:G}),Object(s.jsx)("h1",{children:"Reset Password"}),Object(s.jsx)(Z,{}),Object(s.jsx)(z,{})]})})},Z=O(q),X={username:"",email:"",passwordOne:"",passwordTwo:"",isAdmin:!1,error:null},$=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onSubmit=function(e){var t=s.state,n=t.username,a=t.email,o=t.passwordOne,r=t.isAdmin,i="";i=r?"ADMIN":"EMPLOYEE",s.props.firebase.doCreateUserWithEmailAndPassword(a,o).then((function(e){return s.props.firebase.user(e.user.uid).set({username:n,email:a,roles:i})})).then((function(){return s.props.firebase.doSendEmailVerification()})).then((function(){s.setState(Object(u.a)({},X)),s.props.history.push(N)})).catch((function(e){"auth/email-already-in-use"===e.code&&(e.message="\n  An account with this E-Mail address already exists.\n  Try to login with this account instead. If you think the\n  account is already used from one of the social logins, try\n  to sign in with one of them. Afterward, associate your accounts\n  on your personal account page.\n"),s.setState({error:e})})),e.preventDefault()},s.onChange=function(e){s.setState({[e.target.name]:e.target.value})},s.onChangeCheckbox=function(e){s.setState({[e.target.name]:e.target.checked})},s.state=Object(u.a)({},X),s}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.email,a=e.passwordOne,o=e.passwordTwo,r=(e.isAdmin,e.error),i=a!==o||""===a||""===n||""===t;return Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsx)("input",{className:"form-input",name:"username",autoComplete:"username",value:t,onChange:this.onChange,type:"text",placeholder:"Full Name"}),Object(s.jsx)("input",{className:"form-input",name:"email",autoComplete:"email",value:n,onChange:this.onChange,type:"text",placeholder:"Email Address"}),Object(s.jsx)("input",{className:"form-input",name:"passwordOne",autoComplete:"new-password",value:a,onChange:this.onChange,type:"password",placeholder:"Password"}),Object(s.jsx)("input",{className:"form-input",name:"passwordTwo",autoComplete:"new-password",value:o,onChange:this.onChange,type:"password",placeholder:"Confirm Password"}),Object(s.jsx)("button",{className:"btn btn-primary",disabled:i,type:"submit",children:"Sign Up"}),r&&Object(s.jsx)("p",{children:r.message})]})}}]),n}(a.Component),Q=function(){return Object(s.jsxs)("span",{className:"cta",children:[Object(s.jsx)("p",{children:"Don't have an account?"}),Object(s.jsx)("p",{children:Object(s.jsx)(c.b,{to:S,className:"highlight-link",children:"Sign Up"})})]})},ee=Object(C.a)(l.h,O)($),te=function(){return Object(s.jsx)("div",{className:"page-bg",children:Object(s.jsxs)("div",{className:"page-inner",children:[Object(s.jsx)("img",{className:"signin-logo fade-in",alt:"logo",src:G}),Object(s.jsx)("h1",{children:"Register"}),Object(s.jsx)(ee,{}),Object(s.jsx)(de,{})]})})},ne=n(28),se={email:"",password:"",error:null},ae="auth/account-exists-with-different-credential",oe="\n  An account with an email address to\n  this social account already exists. Try to login from\n  this account instead and associate your social accounts on\n  your personal account page.\n",re=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onSubmit=function(e){var t=s.state,n=t.email,a=t.password;s.props.firebase.doSignInWithEmailAndPassword(n,a).then((function(){s.setState(Object(u.a)({},se)),s.props.history.push(N)})).catch((function(e){s.setState({error:e})})),e.preventDefault()},s.onChange=function(e){s.setState({[e.target.name]:e.target.value})},s.state=Object(u.a)({},se),s}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,a=e.error,o=""===n||""===t;return Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsx)("input",{className:"form-input",name:"email",value:t,autoComplete:"email",onChange:this.onChange,type:"text",placeholder:"Email Address"}),"\xa0",Object(s.jsx)("input",{className:"form-input",name:"password",autoComplete:"current-password",value:n,onChange:this.onChange,type:"password",placeholder:"Password"}),"\xa0",Object(s.jsx)("button",{className:"btn btn-primary",disabled:o,type:"submit",children:"Log in"}),a&&Object(s.jsx)("p",{children:a.message})]})}}]),n}(a.Component),ie=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onSubmit=function(e){s.props.firebase.doSignInWithGoogle().then((function(e){return s.props.firebase.user(e.user.uid).set({username:e.user.displayName,email:e.user.email,roles:"EMPLOYEE"})})).then((function(){s.setState({error:null}),s.props.history.push(N)})).catch((function(e){e.code===ae&&(e.message=oe),s.setState({error:e})})),e.preventDefault()},s.state={error:null},s}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state.error;return Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsxs)("button",{className:"btn btn-social btn-primary",type:"submit",children:[Object(s.jsx)(F.a,{icon:ne.b})," Log in with Google"]}),e&&Object(s.jsx)("p",{children:e.message})]})}}]),n}(a.Component),ce=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onSubmit=function(e){s.props.firebase.doSignInWithFacebook().then((function(e){return s.props.firebase.user(e.user.uid).set({username:e.additionalUserInfo.profile.name,email:e.additionalUserInfo.profile.email,roles:"EMPLOYEE"})})).then((function(){s.setState({error:null}),s.props.history.push(N)})).catch((function(e){e.code===ae&&(e.message=oe),s.setState({error:e})})),e.preventDefault()},s.state={error:null},s}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state.error;return Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsxs)("button",{className:"btn btn-social btn-primary",type:"submit",children:[Object(s.jsx)(F.a,{icon:ne.a})," Log in with Facebook"]}),e&&Object(s.jsx)("p",{children:e.message})]})}}]),n}(a.Component),le=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onSubmit=function(e){s.props.firebase.doSignInWithTwitter().then((function(e){return s.props.firebase.user(e.user.uid).set({username:e.additionalUserInfo.profile.name,email:e.additionalUserInfo.profile.email,roles:"EMPLOYEE"})})).then((function(){s.setState({error:null}),s.props.history.push(N)})).catch((function(e){e.code===ae&&(e.message=oe),s.setState({error:e})})),e.preventDefault()},s.state={error:null},s}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state.error;return Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsxs)("button",{className:"btn btn-social btn-primary",type:"submit",children:[Object(s.jsx)(F.a,{icon:ne.c})," Log in with Twitter"]}),e&&Object(s.jsx)("p",{children:e.message})]})}}]),n}(a.Component),de=function(){return Object(s.jsxs)("span",{className:"cta",children:[Object(s.jsx)("p",{children:"Already have an account?"}),Object(s.jsx)("p",{children:Object(s.jsx)(c.b,{to:I,className:"highlight-link",children:"Sign In"})})]})},ue=Object(C.a)(l.h,O)(re),je=Object(C.a)(l.h,O)(ie),be=(Object(C.a)(l.h,O)(ce),Object(C.a)(l.h,O)(le),function(){return Object(s.jsx)("div",{className:"page-bg",children:Object(s.jsxs)("div",{className:"page-inner",children:[Object(s.jsx)("img",{className:"signin-logo fade-in",alt:"logo",src:G}),Object(s.jsx)("h1",{children:"Log In"}),Object(s.jsx)(ue,{}),Object(s.jsx)(H,{}),Object(s.jsx)("h4",{children:"Or log in with social:"}),Object(s.jsx)(je,{}),Object(s.jsx)(Q,{})]})})}),he=O((function(e){var t=e.firebase;return Object(s.jsxs)("button",{type:"button",className:"btn btn-secondary ",onClick:t.doSignOut,children:["Logout ",Object(s.jsx)(F.a,{icon:B.f})]})})),pe=n(46),me=n(44),Oe=(o.a.Component,function(e){var t=e.id,n=e.name,a=e.checked,o=e.onChange,r=e.optionLabels,i=e.small,c=e.disabled;return Object(s.jsxs)("div",{className:"toggle-switch"+(i?" small-switch":""),children:[Object(s.jsx)("input",{type:"checkbox",name:n,className:"toggle-switch-checkbox",id:t,checked:a,onChange:function(e){return o(e.target.checked)},disabled:c}),t?Object(s.jsxs)("label",{className:"toggle-switch-label",tabIndex:c?-1:1,onKeyDown:function(e){return function(e){32===e.keyCode&&(e.preventDefault(),o(!a))}(e)},htmlFor:t,children:[Object(s.jsx)("span",{className:c?"toggle-switch-inner toggle-switch-disabled":"toggle-switch-inner","data-yes":r[0],"data-no":r[1],tabIndex:-1}),Object(s.jsx)("span",{className:c?"toggle-switch-switch toggle-switch-disabled":"toggle-switch-switch",tabIndex:-1})]}):null]})});Oe.defaultProps={optionLabels:["Yes","No"]};var fe=Oe,ge={companyID:"",error:null},xe=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onSubmit=function(e){var t=s.props.authUser,n=s.state.companyID;s.props.firebase.setUserCompany(t.uid,n).then((function(){s.setState(Object(u.a)({},ge))})).catch((function(e){s.setState({error:e})})),e.preventDefault()},s.onChange=function(e){s.setState({[e.target.name]:e.target.value})},s.state=Object(u.a)({},ge),s}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state,t=e.companyID,n=e.error,a=""===t;return Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsx)("input",{className:"form-input",name:"companyID",autoComplete:"companyID",value:this.state.companyID,onChange:this.onChange,type:"text",placeholder:"Company ID"}),Object(s.jsx)("button",{className:"btn btn-primary",disabled:a,type:"submit",children:"Join This Company"}),n&&Object(s.jsx)("p",{children:n.message})]})}}]),n}(a.Component),ve=function(){return Object(s.jsx)(d.Consumer,{children:function(e){return Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"Join A Company"}),Object(s.jsx)(ye,{authUser:e})]})}})},ye=O(xe),Ce=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onChange=function(e){s.setState({[e.target.name]:e.target.value})},s.onCreateCompany=function(){var e=s.props.authUser.username,t=s.props.authUser.uid,n={companyTitle:s.state.companyTitle,companyAddress:s.state.companyAddress,owner:{ownerName:e,ownerID:t},createdAt:s.props.firebase.serverValue.TIMESTAMP},a=s.props.firebase.createCompany(n);console.log(a),s.setState({companyTitle:"",companyAddress:""})},s.state={companyTitle:"",companyAddress:""},s}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state,t=e.companyTitle,n=e.companyAddress;return Object(s.jsxs)("div",{className:"add-padding-bottom text-center",children:[Object(s.jsx)("h1",{children:"Create A Company!"}),Object(s.jsxs)("form",{children:[Object(s.jsx)("input",{className:"col-10 form-input",type:"text",placeholder:"Name Your Company!",value:t,name:"companyTitle",onChange:this.onChange}),Object(s.jsx)("input",{className:"col-10 form-input",type:"text",placeholder:"Where does it live?",value:n,name:"companyAddress",onChange:this.onChange})]}),Object(s.jsx)("button",{className:"btn btn-primary",type:"submit",onClick:this.onCreateCompany,children:Object(s.jsx)(c.b,{to:A,children:"click me to send back"})})]})}}]),n}(a.Component),Ne=O(Ce),Se=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onChange=function(e){s.setState({[e.target.name]:e.target.value})},s.onCreateBuilding=function(){var e=s.state,t={buildingTitle:e.buildingTitle,buildingAddress:e.buildingAddress,companyID:e.companyID,owner:{ownerName:s.props.authUser.username,ownerID:s.props.authUser.uid},createdAt:s.props.firebase.serverValue.TIMESTAMP},n=s.props.firebase.createBuilding(t);console.log(n),s.setState({buildingTitle:"",buildingAddress:"",companyID:""})},s.state={buildingTitle:"",buildingAddress:"",companyID:""},s}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state,t=e.buildingTitle,n=e.buildingAddress,a=e.companyID;return Object(s.jsxs)("div",{className:"add-padding-bottom text-center",children:[Object(s.jsx)("h1",{children:"Create A Building!"}),Object(s.jsxs)("form",{children:[Object(s.jsx)("input",{className:"col-10 form-input",type:"text",placeholder:"Name Your Building!",value:t,name:"buildingTitle",onChange:this.onChange}),Object(s.jsx)("input",{className:"col-10 form-input",type:"text",placeholder:"Where does it live?",value:n,name:"buildingAddress",onChange:this.onChange}),Object(s.jsx)("input",{className:"col-10 form-input",type:"text",placeholder:"What Your Company ID?",value:a,name:"companyID",onChange:this.onChange})]}),Object(s.jsx)("button",{className:"btn btn-primary",type:"submit",onClick:this.onCreateBuilding,children:Object(s.jsx)(c.b,{to:T,children:"click me to send back"})})]})}}]),n}(a.Component),Ie=O(Se),we=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onChange=function(e){s.setState({[e.target.name]:e.target.value})},s.onCreateFloor=function(){var e=s.state,t={floorTitle:e.floorTitle,floorAddress:e.floorAddress,companyID:e.companyID,buildingID:e.buildingID,owner:{ownerName:s.props.authUser.username,ownerID:s.props.authUser.uid},createdAt:s.props.firebase.serverValue.TIMESTAMP},n=s.props.firebase.createFloor(t);console.log(n),s.setState({floorTitle:"",floorAddress:"",companyID:"",buildingID:""})},s.state={floorTitle:"",floorAddress:"",companyID:"",buildingID:""},s}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state,t=e.floorTitle,n=e.floorAddress,a=e.companyID,o=e.buildingID;return Object(s.jsxs)("div",{className:"add-padding-bottom text-center",children:[Object(s.jsx)("h1",{children:"Create A Floor!"}),Object(s.jsxs)("form",{children:[Object(s.jsx)("input",{className:"col-10 form-input",type:"text",placeholder:"Name Your Floor!",value:t,name:"floorTitle",onChange:this.onChange}),Object(s.jsx)("input",{className:"col-10 form-input",type:"text",placeholder:"Where does it live?",value:n,name:"floorAddress",onChange:this.onChange}),Object(s.jsx)("input",{className:"col-10 form-input",type:"text",placeholder:"What Is Your Company ID?",value:a,name:"companyID",onChange:this.onChange}),Object(s.jsx)("input",{className:"col-10 form-input",type:"text",placeholder:"What Is Your Building ID?",value:o,name:"buildingID",onChange:this.onChange})]}),Object(s.jsx)("button",{className:"btn btn-primary",type:"submit",onClick:this.onCreateFloor,children:Object(s.jsx)(c.b,{to:E,children:"click me to send back"})})]})}}]),n}(a.Component),De=O(we),ke=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onChange=function(e){s.setState({[e.target.name]:e.target.value})},s.onCreateRoom=function(){var e=s.state,t={roomTitle:e.roomTitle,roomAddress:e.roomAddress,companyID:e.companyID,buildingID:e.buildingID,floorID:e.floorID,owner:{ownerName:s.props.authUser.username,ownerID:s.props.authUser.uid},createdAt:s.props.firebase.serverValue.TIMESTAMP},n=s.props.firebase.createRoom(t);console.log(n),s.setState({roomTitle:"",roomAddress:"",companyID:"",buildingID:"",floorID:""})},s.state={roomTitle:"",roomAddress:"",companyID:"",buildingID:"",floorID:""},s}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state,t=e.roomTitle,n=e.roomAddress,a=e.companyID,o=e.buildingID,r=e.floorID;return Object(s.jsxs)("div",{className:"add-padding-bottom text-center",children:[Object(s.jsx)("h1",{children:"Create A Room!"}),Object(s.jsxs)("form",{children:[Object(s.jsx)("input",{className:"col-10 form-input",type:"text",placeholder:"Name Your Room!",value:t,name:"roomTitle",onChange:this.onChange}),Object(s.jsx)("input",{className:"col-10 form-input",type:"text",placeholder:"Where does it live?",value:n,name:"roomAddress",onChange:this.onChange}),Object(s.jsx)("input",{className:"col-10 form-input",type:"text",placeholder:"What Is Your Company ID?",value:a,name:"companyID",onChange:this.onChange}),Object(s.jsx)("input",{className:"col-10 form-input",type:"text",placeholder:"What Is Your Building ID?",value:o,name:"buildingID",onChange:this.onChange}),Object(s.jsx)("input",{className:"col-10 form-input",type:"text",placeholder:"What Is Your Floor ID?",value:r,name:"floorID",onChange:this.onChange})]}),Object(s.jsx)("button",{className:"btn btn-primary",type:"submit",onClick:this.onCreateRoom,children:Object(s.jsx)(c.b,{to:M,children:"click me to send back"})})]})}}]),n}(a.Component),Ae=O(ke),Te=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onCreateReport=function(){var e=s.props.authUser.username,t=s.props.authUser.uid,n=s.state,a=n.companyID,o=n.buildingID,r=n.floorID,i=n.roomID,c=s.state,l=c.reportTitle,d=c.reportMessage,u=c.reportStatus,j=c.reportServiceType,b={reporter:{ownerName:e,ownerID:t},location:{companyID:a,buildingID:o,floorID:r,roomID:i},image:{reportImageName:c.reportImageName,reportImageURL:c.reportImageURL},reportTitle:l,reportMessage:d,reportStatus:u,reportServiceType:j,createdAt:s.props.firebase.serverValue.TIMESTAMP},h=s.props.firebase.createReport(b);console.log(h),s.setState(s.initialState)},s.onChange=function(e){s.setState({[e.target.name]:e.target.value,isBlocking:e.target.value.length>0})},s.onAutoFill=function(){s.setState({isBlocking:!0,companyID:"-MNIVFlXAdfjwAIEslMH",buildingID:"-MNIWgqfPJFOqVVPFLCA",floorID:"-MNIaKm56aa5l5mHaV5-",roomID:"-MNIkOqcBsUhDz2IhflB"})},s.handleChange=function(e){if(e.target.files[0]){var t=e.target.files[0];s.props.firebase.storage.ref("images/".concat(t.name)).put(t).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);s.setState({progress:t})}),(function(e){console.log(e)}),(function(){s.props.firebase.storage.ref("images").child(t.name).getDownloadURL().then((function(e){s.setState({image_url:e,image_name:t.name})}))}))}},s.initialState={isBlocking:!1,upload:null,progress:0,companyID:"",buildingID:"",floorID:"",roomID:"",reportTitle:"",reportMessage:"",reportStatus:"OPEN",reportServiceType:"",reportImageName:"",reportImageURL:""},s.state=s.initialState,s}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state,t=e.isBlocking,n=e.progress,a=this.state,o=a.companyID,r=a.buildingID,i=a.floorID,d=a.roomID,u=a.reportTitle,j=a.reportMessage,b=a.reportServiceType;return Object(s.jsxs)("div",{className:" text-center",children:[Object(s.jsx)("hr",{}),Object(s.jsx)("h2",{children:"Create A Report!"}),Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{className:"form-row",children:[Object(s.jsx)("input",{className:"form-input col-5",type:"text",placeholder:"Company ID",name:"companyID",value:o,onChange:this.onChange}),Object(s.jsx)("input",{className:"form-input col-5",type:"text",placeholder:"Building ID",name:"buildingID",value:r,onChange:this.onChange})]}),Object(s.jsxs)("div",{className:"form-row",children:[Object(s.jsx)("input",{className:"form-input col-5",type:"text",placeholder:"Floor ID",name:"floorID",value:i,onChange:this.onChange}),Object(s.jsx)("input",{className:"form-input col-5",type:"text",placeholder:"Room ID",name:"roomID",value:d,onChange:this.onChange})]}),Object(s.jsx)("div",{className:"btn btn-primary form-input",onClick:this.onAutoFill,children:"Auto Fill Location"}),Object(s.jsx)("div",{className:"form-row",children:Object(s.jsx)("input",{className:"form-input col-10",type:"text",placeholder:"Report Title",name:"reportTitle",value:u,onChange:this.onChange})}),Object(s.jsx)("textarea",{rows:"3",className:"form-input col-12",type:"text",placeholder:"Reason For Report",name:"reportMessage",value:j,onChange:this.onChange}),Object(s.jsxs)("select",{className:"form-control",name:"reportServiceType",value:b,onChange:this.onChange,children:[Object(s.jsx)("option",{value:"",disabled:!0,children:"Select a Service"}),Object(s.jsx)("option",{value:"MAINTENANCE",children:"Maintenance / Repair"}),Object(s.jsx)("option",{value:"HAZARD",children:"Hazard Report"}),Object(s.jsx)("option",{value:"SERVICE",children:"Service Report"})]}),Object(s.jsx)("input",{className:"file-uploader",type:"file",onChange:this.handleChange}),Object(s.jsxs)("p",{className:"text-center",children:["Photo Upload Progress:",Object(s.jsx)("progress",{value:n,max:"100",className:"progress"})]})]}),Object(s.jsx)(l.a,{when:t,message:function(e){return"Are you sure you want to go to ".concat(e.pathname)}}),Object(s.jsx)("button",{className:"btn btn-primary",type:"submit",onClick:this.onCreateReport,children:Object(s.jsx)(c.b,{to:R,children:"Submit Report"})})]})}}]),n}(a.Component),Ee=O(Te),Me=[{id:"password",provider:null},{id:"google.com",provider:"googleProvider"},{id:"facebook.com",provider:"facebookProvider"},{id:"twitter.com",provider:"twitterProvider"}],Re=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).fetchSignInMethods=function(){s.props.firebase.auth.fetchSignInMethodsForEmail(s.props.authUser.email).then((function(e){return s.setState({activeSignInMethods:e,error:null})})).catch((function(e){return s.setState({error:e})}))},s.onSocialLoginLink=function(e){s.props.firebase.auth.currentUser.linkWithPopup(s.props.firebase[e]).then(s.fetchSignInMethods).catch((function(e){return s.setState({error:e})}))},s.onDefaultLoginLink=function(e){var t=s.props.firebase.emailAuthProvider.credential(s.props.authUser.email,e);s.props.firebase.auth.currentUser.linkAndRetrieveDataWithCredential(t).then(s.fetchSignInMethods).catch((function(e){return s.setState({error:e})}))},s.onUnlink=function(e){s.props.firebase.auth.currentUser.unlink(e).then(s.fetchSignInMethods).catch((function(e){return s.setState({error:e})}))},s.state={activeSignInMethods:[],error:null},s}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.fetchSignInMethods()}},{key:"render",value:function(){var e=this,t=this.state,n=t.activeSignInMethods,a=t.error;return Object(s.jsxs)("div",{children:["Sign In Methods:",Object(s.jsx)("ul",{className:"social-links",children:Me.map((function(t){var a=1===n.length,o=n.includes(t.id);return Object(s.jsx)("li",{children:"password"===t.id?Object(s.jsx)(Le,{onlyOneLeft:a,isEnabled:o,signInMethod:t,onLink:e.onDefaultLoginLink,onUnlink:e.onUnlink}):Object(s.jsx)(Ue,{onlyOneLeft:a,isEnabled:o,signInMethod:t,onLink:e.onSocialLoginLink,onUnlink:e.onUnlink})},t.id)}))}),a&&a.message]})}}]),n}(a.Component),Ue=function(e){var t=e.onlyOneLeft,n=e.isEnabled,a=e.signInMethod,o=e.onLink,r=e.onUnlink;return n?Object(s.jsxs)("button",{type:"button",className:"btn btn-primary btn-social",onClick:function(){return r(a.id)},disabled:t,children:["Deactivate ",a.id]}):Object(s.jsxs)("button",{type:"button",className:"btn btn-primary btn-social",onClick:function(){return o(a.provider)},children:["Link ",a.id]})},Le=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onSubmit=function(e){e.preventDefault(),s.props.onLink(s.state.passwordOne),s.setState({passwordOne:"",passwordTwo:""})},s.onChange=function(e){s.setState({[e.target.name]:e.target.value})},s.state={passwordOne:"",passwordTwo:""},s}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onlyOneLeft,n=e.isEnabled,a=e.signInMethod,o=e.onUnlink,r=this.state,i=r.email,c=r.passwordOne,l=r.passwordTwo,d=c!==l||""===c;return n?Object(s.jsxs)("button",{type:"button",className:"btn btn-danger btn-social  disabled",onClick:function(){return o(a.id)},disabled:t,children:["Deactivate ",a.id]}):Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsx)("input",{hidden:!0,name:"email",autoComplete:"email",value:i,type:"text",placeholder:"Email Address"}),Object(s.jsx)("input",{className:"form-input",name:"passwordOne",autoComplete:"new-password",value:c,onChange:this.onChange,type:"password",placeholder:"New Password"}),Object(s.jsx)("input",{className:"form-input",name:"passwordTwo",autoComplete:"new-password",value:l,onChange:this.onChange,type:"password",placeholder:"Confirm New Password"}),Object(s.jsxs)("button",{className:"btn btn-primary",disabled:d,type:"submit",children:["Link ",a.id]})]})}}]),n}(a.Component),Pe=O(Re),Be=Object(C.a)(L,U((function(e){return!!e})))((function(){var e=Object(a.useState)(!1),t=Object(pe.a)(e,2),n=t[0],o=t[1],r=function(e){o(e)};return Object(s.jsx)(d.Consumer,{children:function(e){return Object(s.jsxs)("div",{className:"container text-center add-padding-bottom",children:[Object(s.jsxs)("div",{className:"usercard",children:[Object(s.jsx)("div",{className:"mt-3",children:Object(s.jsx)("img",{className:"profile-photo",src:"https://picsum.photos/200",width:"100",height:"100",alt:"Profile"})}),Object(s.jsxs)("h3",{children:[e.username,"'s Account"]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Email: "}),e.email,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Company: "}),e.company_id||"No Company assigned."]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Roles:"}),e.roles]})]}),Object(s.jsx)("hr",{}),!e.company_id&&Object(s.jsx)(ve,{}),Object(s.jsx)(he,{}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{children:[Object(s.jsx)(fe,{id:"settings",checked:n,onChange:r}),Object(s.jsx)("label",{htmlFor:"settings",children:"Edit Account Settings"})]}),n&&Object(s.jsxs)("div",{children:["Reset Your Password. ",Object(s.jsx)(_,{}),Object(s.jsx)(Pe,{authUser:e})]})]})}})})),Fe=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).state={loading:!1,users:[]},s}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.firebase.users().on("value",(function(t){var n=t.val(),s=Object.keys(n).map((function(e){return Object(u.a)(Object(u.a)({},n[e]),{},{uid:e})}));e.setState({users:s,loading:!1})}))}},{key:"componentWillUnmount",value:function(){this.props.firebase.users().off()}},{key:"render",value:function(){var e=this.state,t=e.users,n=e.loading;return Object(s.jsxs)("div",{className:"add-padding-bottom",children:[Object(s.jsx)("h2",{children:"Users"}),n&&Object(s.jsx)("div",{children:"Loading ..."}),Object(s.jsx)("ul",{children:t.map((function(e){return Object(s.jsxs)("li",{children:[Object(s.jsxs)("span",{children:[Object(s.jsx)("strong",{children:"ID:"})," ",e.uid]}),Object(s.jsx)("br",{}),Object(s.jsxs)("span",{children:[Object(s.jsx)("strong",{children:"E-Mail:"})," ",e.email]}),Object(s.jsx)("br",{}),Object(s.jsxs)("span",{children:[Object(s.jsx)("strong",{children:"Username:"})," ",e.username]}),Object(s.jsx)("br",{}),Object(s.jsx)("span",{children:Object(s.jsx)(c.b,{to:{pathname:"".concat(k,"/").concat(e.uid),state:{user:e}},children:"Details"})}),Object(s.jsx)("hr",{})]},e.uid)}))})]})}}]),n}(a.Component),We=O(Fe),Ve=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onSendPasswordResetEmail=function(){s.props.firebase.doPasswordReset(s.state.user.email)},s.state=Object(u.a)({loading:!1,user:null},e.location.state),s}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.state.user||(this.setState({loading:!0}),this.props.firebase.user(this.props.match.params.id).on("value",(function(t){e.setState({user:t.val(),loading:!1})})))}},{key:"componentWillUnmount",value:function(){this.props.firebase.user(this.props.match.params.id).off()}},{key:"render",value:function(){var e=this.state,t=e.user,n=e.loading;return Object(s.jsxs)("div",{children:[Object(s.jsxs)("h5",{children:["User (",this.props.match.params.id,")"]}),n&&Object(s.jsx)("div",{children:"Loading ..."}),t&&Object(s.jsxs)("div",{children:[Object(s.jsxs)("span",{children:[Object(s.jsx)("strong",{children:"ID:"})," ",t.uid]}),Object(s.jsx)("br",{}),Object(s.jsxs)("span",{children:[Object(s.jsx)("strong",{children:"E-Mail:"})," ",t.email]}),Object(s.jsx)("br",{}),Object(s.jsxs)("span",{children:[Object(s.jsx)("strong",{children:"Username:"})," ",t.username]}),Object(s.jsx)("br",{}),Object(s.jsx)("span",{children:Object(s.jsx)("button",{type:"button",onClick:this.onSendPasswordResetEmail,children:"Send Password Reset"})})]})]})}}]),n}(a.Component),Ye=O(Ve),_e=Object(C.a)(L,U((function(e){return"ADMIN"===e.roles})))((function(){return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"jumbotron paral paralsec",children:Object(s.jsx)("h1",{className:"display-8 text-center mb-3",children:"Admin"})}),Object(s.jsxs)(l.e,{children:[Object(s.jsx)(l.c,{exact:!0,path:k,component:We}),Object(s.jsx)(l.c,{exact:!0,path:"/admin/:id",component:Ye})]})]})})),Ge=function(){return Object(s.jsx)("div",{className:"container landing-container",children:Object(s.jsxs)(c.b,{to:{pathname:N},children:[Object(s.jsx)("img",{className:"landing-logo square fade-in",alt:"logo",src:G}),Object(s.jsx)("p",{className:"title",children:"Minerva Facilities"})]})})},Je=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(s.jsxs)("div",{id:"content-wrap",className:"container pt-5",style:{textAlign:"center"},children:[Object(s.jsx)("h1",{children:"Oops!"}),Object(s.jsx)("h2",{children:"We can't find the page you're looking for."}),Object(s.jsx)("p",{children:Object(s.jsx)(c.b,{to:N,children:Object(s.jsx)("button",{className:"btn btn-secondary",children:"Go to Home Kid"})})})]})}}]),n}(a.Component),qe=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onNextPage=function(){s.setState((function(e){return{limit:e.limit+5}}),s.onListenForCompanies)},s.state={loading:!1,companies:[],limit:5},s}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.firebase.companies().orderByChild("id").limitToLast(this.state.limit).on("value",(function(t){var n=t.val();if(n){var s=Object.keys(n).map((function(e){return Object(u.a)(Object(u.a)({},n[e]),{},{uid:e})}));e.setState({companies:s,loading:!1})}else e.setState({companies:null,loading:!1})}))}},{key:"componentWillUnmount",value:function(){this.props.firebase.companies().off()}},{key:"render",value:function(){var e=this,t=this.state,n=t.companies,a=t.loading;return Object(s.jsx)(d.Consumer,{children:function(t){return Object(s.jsxs)("div",{className:"container add-padding-bottom",children:[a&&Object(s.jsx)("div",{children:"Loading ..."}),n?Object(s.jsxs)("div",{children:[n.length>e.state.limit&&Object(s.jsx)("button",{className:"btn btn-secondary",type:"button",onClick:e.onNextPage,children:"Show More"}),Object(s.jsx)("ul",{className:"ul-comp-list",children:n.map((function(e){return e.uid===t.company_id&&Object(s.jsxs)("li",{className:"r-details-card",children:[Object(s.jsx)("strong",{children:"Title:"})," ",e.companyTitle,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Location:"})," ",e.companyAddress,Object(s.jsx)("br",{}),Object(s.jsx)("div",{className:"row",children:Object(s.jsx)("div",{className:"ml-3 mr-2",children:Object(s.jsx)(c.b,{to:{pathname:"".concat(A,"/").concat(e.uid),state:{company:e}},children:"Details"})})}),Object(s.jsx)("hr",{})]},e.uid)}))})]}):Object(s.jsx)("div",{children:"There are no companies ..."}),"ADMIN"===t.roles&&Object(s.jsx)(Ne,{authUser:t})]})}})}}]),n}(a.Component),He=O(qe),ze=n(23),Ke=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onChange=function(e){s.setState({[e.target.name]:e.target.value})},s.onToggleEditMode=function(){s.setState((function(e){return{editMode:!e.editMode,companyTitle:s.state.company.companyTitle,companyAddress:s.state.company.companyAddress}}))},s.onSaveEdit=function(){var e=s.state,t=e.company,n=e.companyTitle,a=e.companyAddress,o=(t.uid,Object(ze.a)(t,["uid"]));s.props.firebase.company(t.uid).set(Object(u.a)(Object(u.a)({},o),{},{companyTitle:n,companyAddress:a,editedAt:s.props.firebase.serverValue.TIMESTAMP})),s.setState({editMode:!1})},s.onRemoveCompany=function(e,t){var n=s.props.firebase.user(t);n.child("companies").child(e).remove(),n.child("company_id").remove(),s.props.firebase.company(e).remove(),console.log("REMOVED Company: ",e,n)},s.state=Object(u.a)({editMode:!1,loading:!1,company:null,companyTitle:"",companyAddress:""},e.location.state),s}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.state.company||(this.setState({loading:!0}),this.props.firebase.company(this.props.match.params.id).on("value",(function(t){e.setState({company:t.val(),loading:!1})})))}},{key:"componentWillUnmount",value:function(){this.props.firebase.company(this.props.match.params.id).off()}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.company,o=t.editMode,r=t.companyTitle,i=t.companyAddress,l=new Date(1e3*a.createdAt).toString().split(" "),u=l[0]+", "+l[1]+" "+l[2]+", "+l[4]+", "+l[6]+l[7]+l[8],j=new Date(1e3*a.editedAt).toString().split(" "),b=j[0]+", "+j[1]+" "+j[2]+", "+j[4]+", "+j[6]+j[7]+j[8];return Object(s.jsx)(d.Consumer,{children:function(t){return Object(s.jsxs)("div",{className:"container",children:[n&&Object(s.jsx)("div",{children:"Loading ..."}),a&&Object(s.jsxs)("div",{children:[Object(s.jsxs)("h5",{children:["Company (",a.uid,")"]}),Object(s.jsx)("strong",{children:"Title:"})," ",a.companyTitle,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Location:"})," ",a.companyAddress,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Company Owner:"})," ",a.ownerID,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Created At:"})," ",u,Object(s.jsx)("br",{}),a.editedAt&&Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Last Edited At:"})," ",b]}),Object(s.jsx)("br",{}),a.buildingList&&Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Buildings List:"})," ",a.buildingsList]})]}),t.uid===a.owner.ownerID&&Object(s.jsx)("div",{className:"",children:o?Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("input",{type:"text",className:"form-input form-control",placeholder:"Company name...",name:"companyTitle",value:r,onChange:e.onChange}),Object(s.jsx)("input",{type:"text",className:"form-input form-control",placeholder:"Address...",name:"companyAddress",value:i,onChange:e.onChange})]}),Object(s.jsxs)("div",{className:"justify-me",children:[Object(s.jsx)("button",{className:"btn btn-secondary btn-bot",onClick:e.onSaveEdit,children:"Save Changes"}),Object(s.jsx)("button",{className:"btn btn-secondary btn-bot",onClick:e.onToggleEditMode,children:"Cancel Edit"})]})]}):Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("button",{className:"btn-li",onClick:e.onToggleEditMode,children:Object(s.jsx)(F.a,{icon:B.b})}),Object(s.jsx)("button",{className:"btn-li",type:"button",onClick:function(t){return e.onRemoveCompany(a.uid,t.uid)},children:Object(s.jsx)(c.b,{to:A,children:Object(s.jsx)(F.a,{icon:B.g})})})]})}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"ml-3 mr-2",children:Object(s.jsx)(c.b,{to:A,children:Object(s.jsx)("button",{className:"btn btn-secondary",children:"Back"})})}),Object(s.jsx)("div",{className:"mr-2",children:Object(s.jsx)(c.b,{to:{pathname:"".concat(T),state:a},children:Object(s.jsx)("button",{className:"btn btn-success",children:"Buildings List"})})})]})]})}})}}]),n}(a.Component),Ze=O(Ke),Xe=Object(C.a)(L,U((function(e){return!!e})))((function(){return Object(s.jsx)(d.Consumer,{children:function(e){return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"jumbotron paral paralsec",children:Object(s.jsx)("h1",{className:"display-8 text-center mb-3",children:"Companies"})}),Object(s.jsxs)(l.e,{children:[Object(s.jsx)(l.c,{exact:!0,path:A,component:He}),Object(s.jsx)(l.c,{exact:!0,path:"/companies/new",children:Object(s.jsx)(Ne,{authUser:e})}),Object(s.jsx)(l.c,{exact:!0,path:"/companies/:id",component:Ze})]})]})}})})),$e=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onNextPage=function(){s.setState((function(e){return{limit:e.limit+5}}),s.onListenForBuildings)},s.state={loading:!1,buildings:[],limit:5,companyID:s.props.companyID},s}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.firebase.buildings().orderByChild("companyID").limitToLast(this.state.limit).on("value",(function(t){var n=t.val();if(n){var s=Object.keys(n).map((function(e){return Object(u.a)(Object(u.a)({},n[e]),{},{uid:e})}));e.setState({buildings:s,loading:!1})}else e.setState({buildings:null,loading:!1})}))}},{key:"componentWillUnmount",value:function(){this.props.firebase.buildings().off()}},{key:"render",value:function(){var e=this,t=this.state,n=t.buildings,a=t.loading;return Object(s.jsx)(d.Consumer,{children:function(t){return Object(s.jsxs)("div",{className:"container add-padding-bottom",children:[a&&Object(s.jsx)("div",{children:"Loading ..."}),n?Object(s.jsxs)("div",{children:[n.length>e.state.limit&&Object(s.jsx)("button",{className:"btn btn-secondary",type:"button",onClick:e.onNextPage,children:"Show More"}),Object(s.jsx)("ul",{className:"ul-comp-list",children:n.map((function(e){return e.companyID===t.company_id&&Object(s.jsxs)("li",{className:"r-details-card",children:[Object(s.jsx)("strong",{children:"Title:"})," ",e.buildingTitle,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Location:"})," ",e.buildingAddress,Object(s.jsx)("br",{}),Object(s.jsx)("div",{className:"row",children:Object(s.jsx)("div",{className:"ml-3 mr-2",children:Object(s.jsx)(c.b,{to:{pathname:"".concat(T,"/").concat(e.uid),state:{building:e}},children:"Details"})})}),Object(s.jsx)("hr",{})]},e.uid)}))})]}):Object(s.jsx)("div",{children:"There are no buildings ..."}),"ADMIN"===t.roles&&Object(s.jsx)(Ie,{authUser:t})]})}})}}]),n}(a.Component),Qe=O($e),et=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onChange=function(e){s.setState({[e.target.name]:e.target.value})},s.onToggleEditMode=function(){s.setState((function(e){return{editMode:!e.editMode,companyID:s.state.companyID,buildingTitle:s.state.building.buildingTitle,buildingAddress:s.state.building.buildingAddress}}))},s.onSaveEdit=function(){var e=s.state,t=e.building,n=e.buildingTitle,a=e.buildingAddress,o=(t.uid,Object(ze.a)(t,["uid"]));s.props.firebase.building(t.uid).set(Object(u.a)(Object(u.a)({},o),{},{buildingTitle:n,buildingAddress:a,editedAt:s.props.firebase.serverValue.TIMESTAMP})),s.setState({editMode:!1})},s.onRemoveBuilding=function(e){s.props.firebase.building(e).remove()},s.state=Object(u.a)({loading:!1,building:null,editMode:!1,companyID:"",buildingTitle:"",buildingAddress:""},e.location.state),s}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.state.building?console.log(this.state):(this.setState({loading:!0}),this.props.firebase.building(this.props.match.params.id).on("value",(function(t){e.setState({building:t.val(),loading:!1})})))}},{key:"componentWillUnmount",value:function(){this.props.firebase.building(this.props.match.params.id).off()}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.building,o=t.companyID,r=t.editMode,i=t.buildingTitle,l=t.buildingAddress,u=new Date(1e3*a.createdAt).toString().split(" "),j=u[0]+", "+u[1]+" "+u[2]+", "+u[4]+", "+u[6]+u[7]+u[8],b=new Date(1e3*a.editedAt).toString().split(" "),h=b[0]+", "+b[1]+" "+b[2]+", "+b[4]+", "+b[6]+b[7]+b[8];return Object(s.jsx)(d.Consumer,{children:function(t){return Object(s.jsxs)("div",{className:"container",children:[n&&Object(s.jsx)("div",{children:"Loading ..."}),a&&Object(s.jsxs)("div",{children:[Object(s.jsxs)("h5",{children:["Building (",a.uid,")"]}),Object(s.jsx)("strong",{children:"Title:"})," ",a.buildingTitle,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Location:"})," ",a.buildingAddress,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Company:"})," ",o,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Company Owner:"})," ",a.companyOwner,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Created At:"})," ",j,Object(s.jsx)("br",{}),a.editedAt&&Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Last Edited At:"})," ",h]})]}),t.uid===a.owner.ownerID&&Object(s.jsx)("div",{className:"",children:r?Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("input",{type:"text",className:"col-10 form-input",placeholder:"Name Your Building!",name:"buildingTitle",value:i,onChange:e.onChange}),Object(s.jsx)("input",{type:"text",className:"col-10 form-input",placeholder:"Where does it live?",name:"buildingAddress",value:l,onChange:e.onChange})]}),Object(s.jsxs)("div",{className:"justify-me",children:[Object(s.jsx)("button",{className:"btn btn-secondary btn-bot",onClick:e.onSaveEdit,children:"Save Changes"}),Object(s.jsx)("button",{className:"btn btn-secondary btn-bot",onClick:e.onToggleEditMode,children:"Cancel Edit"})]})]}):Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("button",{className:"btn-li",onClick:e.onToggleEditMode,children:Object(s.jsx)(F.a,{icon:B.b})}),Object(s.jsx)("button",{className:"btn-li",tpye:"button",onClick:function(){return e.onRemoveBuilding(a.uid)},children:Object(s.jsx)(c.b,{to:T,children:Object(s.jsx)(F.a,{icon:B.g})})})]})}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"ml-3 mr-2",children:Object(s.jsx)(c.b,{to:T,children:Object(s.jsx)("button",{className:"btn btn-secondary",children:"Back"})})}),Object(s.jsx)("div",{className:"mr-2",children:Object(s.jsx)(c.b,{to:{pathname:"".concat(E),state:a},children:Object(s.jsx)("button",{className:"btn btn-success",children:"Floors List "})})})]})]})}})}}]),n}(a.Component),tt=O(et),nt=Object(C.a)(L,U((function(e){return!!e})))((function(){return Object(s.jsx)(d.Consumer,{children:function(e){return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"jumbotron paral paralsec",children:Object(s.jsx)("h1",{className:"display-8 text-center mb-3",children:"Buildings"})}),Object(s.jsxs)(l.e,{children:[Object(s.jsx)(l.c,{exact:!0,path:T,component:Qe}),Object(s.jsx)(l.c,{exact:!0,path:"/buildings/new",children:Object(s.jsx)(Ie,{authUser:e})}),Object(s.jsx)(l.c,{exact:!0,path:"/buildings/:id",component:tt})]})]})}})})),st=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onNextPage=function(){s.setState((function(e){return{limit:e.limit+5}}),s.onListenForFloors)},s.state={loading:!1,floors:[],limit:5,companyID:s.props.companyID,buildingID:s.props.buildingID},s}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.firebase.floors().orderByChild("companyID").limitToLast(this.state.limit).on("value",(function(t){var n=t.val();if(n){var s=Object.keys(n).map((function(e){return Object(u.a)(Object(u.a)({},n[e]),{},{uid:e})}));e.setState({floors:s,loading:!1})}else e.setState({floors:null,loading:!1})}))}},{key:"componentWillUnmount",value:function(){this.props.firebase.floors().off()}},{key:"render",value:function(){var e=this,t=this.state,n=t.floors,a=t.loading;return Object(s.jsx)(d.Consumer,{children:function(t){return Object(s.jsxs)("div",{className:"container add-padding-bottom",children:[a&&Object(s.jsx)("div",{children:"Loading ..."}),n?Object(s.jsxs)("div",{children:[n.length>e.state.limit&&Object(s.jsx)("button",{className:"btn btn-secondary btn-bot",type:"button",onClick:e.onNextPage,children:"More"}),Object(s.jsx)("ul",{className:"ul-comp-list",children:n.map((function(e){return e.companyID===t.company_id&&Object(s.jsxs)("li",{className:"r-details-card",children:[Object(s.jsx)("strong",{children:"Title:"})," ",e.floorTitle,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Location:"})," ",e.floorAddress,Object(s.jsx)("br",{}),Object(s.jsx)("div",{className:"row",children:Object(s.jsx)("div",{className:"ml-3 mr-2",children:Object(s.jsx)(c.b,{to:{pathname:"".concat(E,"/").concat(e.uid),state:{floor:e}},children:"Details"})})}),Object(s.jsx)("hr",{})]},e.uid)}))})]}):Object(s.jsx)("div",{children:"There are no floors for your Company/Building..."}),"ADMIN"===t.roles&&Object(s.jsx)(De,{authUser:t})]})}})}}]),n}(a.Component),at=O(st),ot=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onChange=function(e){s.setState({[e.target.name]:e.target.value})},s.onToggleEditMode=function(){s.setState((function(e){return{editMode:!e.editMode,companyID:s.state.companyID,buildingID:s.state.buildingID,floorTitle:s.state.floor.floorTitle,floorAddress:s.state.floor.floorAddress}}))},s.onSaveEdit=function(){var e=s.state,t=e.floor,n=e.floorTitle,a=e.floorAddress,o=(t.uid,Object(ze.a)(t,["uid"]));s.props.firebase.floor(t.uid).set(Object(u.a)(Object(u.a)({},o),{},{floorTitle:n,floorAddress:a,editedAt:s.props.firebase.serverValue.TIMESTAMP})),s.setState({editMode:!1})},s.onRemoveFloor=function(e){s.props.firebase.floor(e).remove()},s.state=Object(u.a)({loading:!1,floor:null,editMode:!1,companyID:"",floorTitle:"",floorAddress:""},e.location.state),s}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.state.floor||(this.setState({loading:!0}),this.props.firebase.floor(this.props.match.params.id).on("value",(function(t){e.setState({floor:t.val(),loading:!1})})))}},{key:"componentWillUnmount",value:function(){this.props.firebase.floor(this.props.match.params.id).off()}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.floor,o=t.editMode,r=t.floorTitle,i=t.floorAddress,l=new Date(1e3*a.createdAt).toString().split(" "),u=l[0]+", "+l[1]+" "+l[2]+", "+l[4]+", "+l[6]+l[7]+l[8],j=new Date(1e3*a.editedAt).toString().split(" "),b=j[0]+", "+j[1]+" "+j[2]+", "+j[4]+", "+j[6]+j[7]+j[8];return Object(s.jsx)(d.Consumer,{children:function(t){return Object(s.jsxs)("div",{className:"container",children:[n&&Object(s.jsx)("div",{children:"Loading ..."}),a&&Object(s.jsxs)("div",{children:[Object(s.jsxs)("h5",{children:["Floor (",a.uid,")"]}),Object(s.jsx)("strong",{children:"Title:"})," ",a.floorTitle,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Location:"})," ",a.floorAddress,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Company:"})," ",a.companyID,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Building:"})," ",a.buildingID,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Company Owner:"})," ",a.owner.ownerName,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Created At:"})," ",u,Object(s.jsx)("br",{}),a.editedAt&&Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Last Edited At:"})," ",b]})]}),t.uid===a.owner.ownerID&&Object(s.jsx)("div",{className:"",children:o?Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("input",{type:"text",className:"col-10 form-input",placeholder:"Floor Name?",name:"floorTitle",value:r,onChange:e.onChange}),Object(s.jsx)("input",{placeholder:"Floor Location/Number?",type:"text",className:"col-10 form-input",name:"floorAddress",value:i,onChange:e.onChange})]}),Object(s.jsxs)("div",{className:"justify-me",children:[Object(s.jsx)("button",{className:"btn btn-secondary btn-bot",onClick:e.onSaveEdit,children:"Save"}),Object(s.jsx)("button",{className:"btn btn-secondary btn-bot",onClick:e.onToggleEditMode,children:"Reset"})]})]}):Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("button",{className:"btn-li",onClick:e.onToggleEditMode,children:Object(s.jsx)(F.a,{icon:B.b})}),Object(s.jsx)("button",{type:"button",className:"btn-li",onClick:function(){return e.onRemoveFloor(a.uid)},children:Object(s.jsx)(c.b,{to:E,children:Object(s.jsx)(F.a,{icon:B.g})})})]})}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"ml-3 mr-2",children:Object(s.jsx)(c.b,{to:E,children:Object(s.jsx)("button",{className:"btn btn-secondary",children:"Back"})})}),Object(s.jsx)("div",{className:"mr-2",children:Object(s.jsx)(c.b,{to:{pathname:"".concat(M),state:a},children:Object(s.jsx)("button",{className:"btn btn-success",children:"Rooms List "})})})]})]})}})}}]),n}(a.Component),rt=O(ot),it=Object(C.a)(L,U((function(e){return!!e})))((function(){return Object(s.jsx)(d.Consumer,{children:function(e){return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"jumbotron paral paralsec",children:Object(s.jsx)("h1",{className:"display-8 text-center mb-3",children:"Floors"})}),Object(s.jsxs)(l.e,{children:[Object(s.jsx)(l.c,{exact:!0,path:E,component:at}),Object(s.jsx)(l.c,{exact:!0,path:"/floors/new",children:Object(s.jsx)(De,{authUser:e})}),Object(s.jsx)(l.c,{exact:!0,path:"/floors/:id",component:rt})]})]})}})})),ct=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onNextPage=function(){s.setState((function(e){return{limit:e.limit+5}}),s.onListenForFloors)},s.state={loading:!1,rooms:[],limit:5,companyID:s.props.companyID,buildingID:s.props.buildingID,floorID:s.props.floorID},s}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.firebase.rooms().orderByChild("companyID").limitToLast(this.state.limit).on("value",(function(t){var n=t.val();if(n){var s=Object.keys(n).map((function(e){return Object(u.a)(Object(u.a)({},n[e]),{},{uid:e})}));e.setState({rooms:s,loading:!1})}else e.setState({floors:null,loading:!1})}))}},{key:"componentWillUnmount",value:function(){this.props.firebase.rooms().off()}},{key:"render",value:function(){var e=this,t=this.state,n=t.rooms,a=t.loading;return Object(s.jsx)(d.Consumer,{children:function(t){return Object(s.jsxs)("div",{className:"container add-padding-bottom",children:[a&&Object(s.jsx)("div",{children:"Loading ..."}),n?Object(s.jsxs)("div",{children:[n.length>e.state.limit&&Object(s.jsx)("button",{className:"btn btn-secondary btn-bot",type:"button",onClick:e.onNextPage,children:"More"}),Object(s.jsx)("ul",{className:"ul-comp-list",children:n.map((function(e){return e.companyID===t.company_id&&Object(s.jsxs)("li",{children:[Object(s.jsx)("strong",{children:"Title:"})," ",e.roomTitle,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Location:"})," ",e.roomAddress,Object(s.jsx)("br",{}),Object(s.jsx)(c.b,{to:{pathname:"".concat(M,"/").concat(e.uid),state:{room:e}},children:"Details"}),Object(s.jsx)("hr",{})]},e.uid)}))})]}):Object(s.jsx)("div",{children:"There are no Rooms for your Building/Floor..."}),"ADMIN"===t.roles&&Object(s.jsx)(Ae,{authUser:t})]})}})}}]),n}(a.Component),lt=O(ct),dt=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onChange=function(e){s.setState({[e.target.name]:e.target.value})},s.onToggleEditMode=function(){s.setState((function(e){return{editMode:!e.editMode,companyID:s.state.companyID,buildingID:s.state.buildingID,floorID:s.state.floorID,roomTitle:s.state.room.roomTitle,roomAddress:s.state.room.roomAddress}}))},s.onSaveEdit=function(){var e=s.state,t=e.room,n=e.roomTitle,a=e.roomAddress,o=(t.uid,Object(ze.a)(t,["uid"]));s.props.firebase.room(t.uid).set(Object(u.a)(Object(u.a)({},o),{},{roomTitle:n,roomAddress:a,editedAt:s.props.firebase.serverValue.TIMESTAMP})),s.setState({editMode:!1})},s.onRemoveRoom=function(e){s.props.firebase.room(e).remove()},s.state=Object(u.a)({loading:!1,room:null,editMode:!1,companyID:"",roomTitle:"",roomAddress:""},e.location.state),s}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.state.room||(this.setState({loading:!0}),this.props.firebase.room(this.props.match.params.id).on("value",(function(t){e.setState({room:t.val(),loading:!1})})))}},{key:"componentWillUnmount",value:function(){this.props.firebase.room(this.props.match.params.id).off()}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.room,o=t.editMode,r=t.roomTitle,i=t.roomAddress,l=new Date(1e3*a.createdAt).toString().split(" "),u=l[0]+", "+l[1]+" "+l[2]+", "+l[4]+", "+l[6]+l[7]+l[8],j=new Date(1e3*a.editedAt).toString().split(" "),b=j[0]+", "+j[1]+" "+j[2]+", "+j[4]+", "+j[6]+j[7]+j[8];return Object(s.jsx)(d.Consumer,{children:function(t){return Object(s.jsxs)("div",{className:"container",children:[n&&Object(s.jsx)("div",{children:"Loading ..."}),a&&Object(s.jsxs)("div",{children:[Object(s.jsxs)("h5",{children:["Room (",a.uid,")"]}),Object(s.jsx)("strong",{children:"Title:"})," ",a.roomTitle,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Location:"})," ",a.roomAddress,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Company ID:"})," ",a.companyID,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Building ID:"})," ",a.buildingID,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Floor ID:"})," ",a.floorID,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Created At:"})," ",u,Object(s.jsx)("br",{}),a.editedAt&&Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Last Edited At:"})," ",b]})]}),t.uid===a.owner.ownerID&&Object(s.jsx)("div",{className:"",children:o?Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("input",{type:"text",className:"col-10 form-input",placeholder:"Room Name?",name:"roomTitle",value:r,onChange:e.onChange}),Object(s.jsx)("input",{placeholder:"Room Location/Number?",type:"text",className:"col-10 form-input",name:"roomAddress",value:i,onChange:e.onChange})]}),Object(s.jsxs)("div",{className:"justify-me",children:[Object(s.jsx)("button",{className:"btn btn-secondary btn-bot",onClick:e.onSaveEdit,children:"Save"}),Object(s.jsx)("button",{className:"btn btn-secondary btn-bot",onClick:e.onToggleEditMode,children:"Reset"})]})]}):Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("button",{className:"btn-li",onClick:e.onToggleEditMode,children:Object(s.jsx)(F.a,{icon:B.b})}),Object(s.jsx)("button",{type:"button",className:"btn-li",onClick:function(){return e.onRemoveRoom(a.uid)},children:Object(s.jsx)(c.b,{to:M,children:Object(s.jsx)(F.a,{icon:B.g})})})]})}),Object(s.jsxs)("div",{className:"row justify-me",children:[Object(s.jsx)("div",{className:"ml-3 mr-2",children:Object(s.jsx)(c.b,{to:M,children:Object(s.jsx)("button",{className:"btn btn-secondary",children:"Back"})})}),Object(s.jsx)("div",{className:"mr-2",children:Object(s.jsx)(c.b,{to:{pathname:"".concat(R),state:a},children:Object(s.jsx)("button",{className:"btn btn-success",children:"Create Report"})})})]})]})}})}}]),n}(a.Component),ut=O(dt),jt=Object(C.a)(L,U((function(e){return!!e})))((function(){return Object(s.jsx)(d.Consumer,{children:function(e){return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"jumbotron paral paralsec",children:Object(s.jsx)("h1",{className:"display-8 text-center mb-3",children:"Rooms"})}),Object(s.jsxs)(l.e,{children:[Object(s.jsx)(l.c,{exact:!0,path:M,component:lt}),Object(s.jsx)(l.c,{exact:!0,path:"/rooms/new",children:Object(s.jsx)(Ae,{authUser:e})}),Object(s.jsx)(l.c,{exact:!0,path:"/rooms/:id",component:ut})]})]})}})})),bt=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onNextPage=function(){s.setState((function(e){return{limit:e.limit+5}}),s.onListenForReports)},s.state={loading:!1,reports:[],limit:5,companyID:s.props.companyID,buildingID:s.props.buildingID,floorID:s.props.floorID,roomID:s.props.roomID},s}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.firebase.reports().orderByChild("createdAt").on("value",(function(t){var n=t.val();if(n){var s=Object.keys(n).map((function(e){return Object(u.a)(Object(u.a)({},n[e]),{},{uid:e})}));e.setState({reports:s,loading:!1})}else e.setState({reports:null,loading:!1})}))}},{key:"componentWillUnmount",value:function(){this.props.firebase.reports().off()}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.reports;return Object(s.jsx)(d.Consumer,{children:function(t){return Object(s.jsxs)("div",{className:"container add-padding-bottom",children:[n&&Object(s.jsx)("div",{children:"Loading ..."}),a?Object(s.jsxs)("div",{children:[a.length>e.state.limit&&Object(s.jsx)("button",{className:"btn btn-secondary btn-bot",type:"button",onClick:e.onNextPage,children:"More"}),Object(s.jsx)("ul",{className:"ul-comp-list",children:a.map((function(e){return e.location.companyID===t.company_id&&Object(s.jsx)("li",{className:"r-details-card",children:Object(s.jsx)(c.b,{to:{pathname:"".concat(R,"/").concat(e.uid),state:{report:e}},children:Object(s.jsxs)("div",{className:"report-card",children:[Object(s.jsx)("p",{className:"comp-item report-title",children:Object(s.jsx)("strong",{children:e.reportTitle})}),Object(s.jsx)("hr",{}),Object(s.jsx)("p",{className:"comp-item report-id",children:Object(s.jsxs)("sup",{children:[new Date(1e3*e.createdAt).toString().split(" ")," ",Object(s.jsx)("br",{})," ",e.uid]})}),Object(s.jsxs)("p",{className:"comp-item",children:[Object(s.jsx)("strong",{children:"Status: "}),"(",e.reportStatus,")"]}),Object(s.jsxs)("p",{className:"comp-item",children:[Object(s.jsx)("strong",{children:"Request Type: "}),"(",e.reportServiceType,")"]}),Object(s.jsxs)("p",{className:"comp-item report-location",children:[Object(s.jsx)("strong",{children:"Room ID:"}),Object(s.jsx)("span",{className:"ticket-info",children:e.location.roomID})]})]})})},e.uid)}))})]}):Object(s.jsx)("div",{children:"There are no Reports for your Company/Building..."}),Object(s.jsx)(Ee,{authUser:t})]})}})}}]),n}(a.Component),ht=O(bt),pt=n(45),mt=(n(62),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).onToggleEditMode=function(){s.setState((function(e){return{editMode:!e.editMode,reportTitle:s.state.report.reportTitle,reportMessage:s.state.report.reportMessage,reportStatus:s.state.report.reportStatus,reportServiceType:s.state.report.reportServiceType}}))},s.onChangeEdits=function(e){s.setState({[e.target.name]:e.target.value,isBlocking:e.target.value.length>0})},s.onSaveEdit=function(){var e=s.state,t=e.report,n=e.reportTitle,a=e.reportMessage,o=e.reportStatus,r=e.reportServiceType,i=(t.uid,Object(ze.a)(t,["uid"]));s.props.firebase.report(t.uid).set(Object(u.a)(Object(u.a)({},i),{},{reportTitle:n,reportMessage:a,reportStatus:o,reportServiceType:r,editedAt:s.props.firebase.serverValue.TIMESTAMP})),s.setState({editMode:!1})},s.onRemoveReport=function(e){var t=s.props.firebase.report(e);Object(pt.confirmAlert)({title:"Confirm Delete",message:"Are you sure to do this.",buttons:[{label:"Yes",onClick:function(){t.remove()}},{label:"No"}]})},s.state=Object(u.a)({loading:!1,editMode:!1,isBlocking:!1,upload:null,progress:0,report:null,reportTitle:"",reportMessage:"",reportStatus:"OPEN",reportServiceType:""},e.location.state),s}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.state.report||(this.setState({loading:!0}),this.props.firebase.reports(this.props.match.params.id).on("value",(function(t){e.setState({report:t.val(),loading:!1,isBlocking:!1})})))}},{key:"componentWillUnmount",value:function(){this.props.firebase.report(this.props.match.params.id).off()}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.report,o=t.editMode,r=t.reportTitle,i=t.reportMessage,l=t.reportStatus,u=t.reportServiceType,j=new Date(1e3*a.createdAt).toString().split(" "),b=j[0]+", "+j[1]+" "+j[2]+", "+j[4]+", "+j[6]+j[7]+j[8],h=new Date(1e3*a.editedAt).toString().split(" "),p=h[0]+", "+h[1]+" "+h[2]+", "+h[4]+", "+h[6]+h[7]+h[8];return Object(s.jsx)(d.Consumer,{children:function(t){return Object(s.jsxs)("div",{className:"content-wrapper",children:[n&&Object(s.jsx)("div",{children:"Loading ..."}),a&&Object(s.jsxs)("div",{className:"container",children:[Object(s.jsxs)("div",{className:"r-details-card",children:[Object(s.jsx)("strong",{children:"Company:"})," ",a.location.companyID,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Building:"})," ",a.location.buildingID,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Reporter:"})," ",a.reporter.ownerName,Object(s.jsx)("br",{}),Object(s.jsx)("strong",{children:"Created At:"})," ",b,Object(s.jsx)("br",{}),a.editedAt&&Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Last Edited At:"})," ",p]})]}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{className:"r-details-card",children:[Object(s.jsxs)("p",{className:"comp-item",children:[Object(s.jsx)("strong",{children:"Subject: "}),a.reportTitle]}),Object(s.jsxs)("p",{className:"comp-item",children:[Object(s.jsx)("strong",{children:"Ticket Id:"})," ",Object(s.jsx)("span",{className:"ticket-info",children:a.uid})]}),Object(s.jsxs)("p",{className:"comp-item",children:[Object(s.jsx)("strong",{children:"Request Status: "}),"(",a.reportStatus,")"]}),Object(s.jsxs)("p",{className:"comp-item",children:[Object(s.jsx)("strong",{children:"Request Type: "}),"(",a.reportServiceType,")"]}),Object(s.jsxs)("p",{className:"comp-item report-desc",children:[Object(s.jsx)("strong",{children:"Desc: "}),a.reportMessage]}),a.image&&Object(s.jsx)("div",{children:Object(s.jsx)("a",{href:a.image,children:Object(s.jsx)("img",{src:a.image,alt:"Uploaded Images",height:"150",width:"150"})})})]})]}),t.uid===a.reporter.ownerID&&Object(s.jsx)("div",{children:o?Object(s.jsxs)("div",{className:"text-center edit-container",children:[Object(s.jsx)("div",{className:"form-row",children:Object(s.jsx)("input",{className:"form-input col-10",type:"text",placeholder:"Report Title",name:"reportTitle",value:r,onChange:e.onChangeEdits})}),Object(s.jsxs)("div",{className:"form-row",children:[Object(s.jsx)("div",{className:"col-5",children:Object(s.jsxs)("select",{className:"form-control",name:"reportServiceType",value:u,onChange:e.onChangeEdits,children:[Object(s.jsx)("option",{value:"",disabled:!0,children:"Select a Service"}),Object(s.jsx)("option",{value:"MAINTENANCE",children:"Maintenance / Repair"}),Object(s.jsx)("option",{value:"HAZARD",children:"Hazard Report"}),Object(s.jsx)("option",{value:"SERVICE",children:"Service Report"})]})}),Object(s.jsx)("div",{className:"col-4",children:Object(s.jsxs)("select",{className:"form-control",name:"reportStatus",value:l,onChange:e.onChangeEdits,children:[Object(s.jsx)("option",{value:"",disabled:!0,children:"Select a Status"}),Object(s.jsx)("option",{value:"OPEN",children:"OPEN"}),Object(s.jsx)("option",{value:"CLOSED",children:"CLOSED"}),Object(s.jsx)("option",{value:"URGENT",children:"URGENT"})]})})]}),Object(s.jsx)("textarea",{rows:"1",className:"form-input col-10",type:"text",name:"reportMessage",value:i,onChange:e.onChangeEdits}),Object(s.jsxs)("div",{className:"form-row edit-btn-container",children:[Object(s.jsx)("button",{className:"btn btn-primary",onClick:e.onSaveEdit,children:"Save"}),Object(s.jsx)("button",{className:"btn btn-secondary",onClick:e.onToggleEditMode,children:"Reset"})]})]}):Object(s.jsxs)("div",{className:"row justify-me",children:[Object(s.jsx)("button",{className:"btn-li",onClick:e.onToggleEditMode,children:Object(s.jsx)(F.a,{icon:B.b})}),Object(s.jsx)("button",{className:"btn-li",type:"button",onClick:function(){return e.onRemoveReport(a.uid)},children:Object(s.jsx)(F.a,{icon:B.g})})]})}),Object(s.jsx)("div",{className:"container text-center mt-3",children:Object(s.jsx)(c.b,{to:R,children:Object(s.jsx)("button",{className:"btn btn-secondary",children:"Back "})})})]})}})}}]),n}(a.Component)),Ot=O(mt),ft=Object(C.a)(L,U((function(e){return!!e})))((function(){return Object(s.jsx)(d.Consumer,{children:function(e){return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"jumbotron paral paralsec",children:Object(s.jsx)("h1",{className:"display-8 text-center mb-3",children:"Reports"})}),Object(s.jsxs)(l.e,{children:[Object(s.jsx)(l.c,{exact:!0,path:R,component:ht}),Object(s.jsx)(l.c,{exact:!0,path:"/reports/new",children:Object(s.jsx)(Ee,{authUser:e})}),Object(s.jsx)(l.c,{exact:!0,path:"/reports/:id",component:Ot})]})]})}})})),gt=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var s;return Object(j.a)(this,n),(s=t.call(this,e)).state={showMessage:!1},s}return Object(b.a)(n,[{key:"componentDidMount",value:function(){!function(){var e=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(e)}()||"standalone"in window.navigator&&window.navigator.standalone||this.setState({ShowMessage:!0})}},{key:"componentWillUnmount",value:function(){this.setState({ShowMessage:!1})}},{key:"render",value:function(){var e=this.state.showInstallMessage;return Object(s.jsx)("div",{children:e&&Object(s.jsx)("div",{children:Object(s.jsxs)("p",{children:["Install this webapp on your Iphone: tap ",Object(s.jsx)(F.a,{icon:B.e})," Share, then ",Object(s.jsx)(F.a,{icon:B.d})," Add to Homescreen."]})})})}}]),n}(a.Component),xt=y((function(){return Object(s.jsx)(c.a,{children:Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"hidden text-center",children:Object(s.jsx)("div",{className:"row desktop-banner",children:Object(s.jsxs)("div",{className:"col",children:[Object(s.jsx)("img",{className:"littler-square",alt:"logo",src:P}),Object(s.jsxs)("h3",{children:[Object(s.jsx)("br",{}),"Visit us on mobile to get the full experience!"]})]})})}),Object(s.jsxs)("div",{className:"site-content",children:[Object(s.jsx)(d.Consumer,{children:function(e){return e?Object(s.jsxs)(l.e,{children:[Object(s.jsx)(l.c,{path:w,component:K}),Object(s.jsx)(l.c,{path:k,component:_e}),Object(s.jsx)(l.c,{path:D,component:Be}),Object(s.jsx)(l.c,{path:A,component:Xe}),Object(s.jsx)(l.c,{path:T,component:nt}),Object(s.jsx)(l.c,{path:E,component:it}),Object(s.jsx)(l.c,{path:M,component:jt}),Object(s.jsx)(l.c,{path:R,component:ft}),Object(s.jsx)(l.c,{exact:!0,path:N,children:Object(s.jsx)(l.b,{to:R})}),Object(s.jsx)(l.c,{exact:!0,path:"/",children:Object(s.jsx)(l.b,{to:N})}),Object(s.jsx)(l.c,{path:S,children:Object(s.jsx)(l.b,{to:N})}),Object(s.jsx)(l.c,{path:I,children:Object(s.jsx)(l.b,{to:N})}),Object(s.jsx)(l.c,{path:"*",component:Je})]}):Object(s.jsxs)(l.e,{children:[Object(s.jsx)(l.c,{exact:!0,path:"/",component:Ge}),Object(s.jsx)(l.c,{exact:!0,path:S,component:te}),Object(s.jsx)(l.c,{exact:!0,path:I,component:be}),Object(s.jsx)(l.c,{exact:!0,path:w,component:K}),Object(s.jsx)(l.c,{path:N,children:Object(s.jsx)(l.b,{to:I})}),Object(s.jsx)(l.c,{path:k,children:Object(s.jsx)(l.b,{to:I})}),Object(s.jsx)(l.c,{path:D,children:Object(s.jsx)(l.b,{to:I})}),Object(s.jsx)(l.c,{path:A,children:Object(s.jsx)(l.b,{to:I})}),Object(s.jsx)(l.c,{path:T,children:Object(s.jsx)(l.b,{to:I})}),Object(s.jsx)(l.c,{path:E,children:Object(s.jsx)(l.b,{to:I})}),Object(s.jsx)(l.c,{path:M,children:Object(s.jsx)(l.b,{to:I})}),Object(s.jsx)(l.c,{path:R,children:Object(s.jsx)(l.b,{to:I})}),Object(s.jsx)(l.c,{path:"*",component:Je})]})}}),Object(s.jsx)(gt,{}),Object(s.jsx)(W,{})]})]})})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var vt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),s(e),a(e),o(e),r(e)}))};n(63),n(64);i.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(f.Provider,{value:new v,children:Object(s.jsx)(xt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),vt()}},[[65,1,2]]]);
//# sourceMappingURL=main.3ca84937.chunk.js.map